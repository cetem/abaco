<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="iconic">&#xe055;</span>
      </a>

      <%= link_to t('app_name'), root_path, class: 'brand' %>

      <% if user_signed_in? %>
        <div class="nav-collapse">
          <ul class="nav">
            <%= content_tag(
              :li, link_to(t('menu.users'), users_path),
              class: ('active' if controller_name == 'users')
            ) if can? :read, User %>
            <%= content_tag(
              :li, link_to(t('menu.outflows'), outflows_path),
              class: ('active' if controller_name == 'outflows')
            ) if can? :read, Outflow %>
            <%= content_tag(
              :li, link_to(t('menu.settings'), settings_path),
              class: ('active' if controller_name == 'settings')
            ) if can? :read, Setting %>
            <%= content_tag(
              :li, link_to(t('menu.operators'), operators_path),
              class: ('active' if controller_name == 'operators')
            ) if can? :read, Operator %>
            <%= content_tag(
              :li, link_to(t('menu.providers'), providers_path),
              class: ('active' if controller_name == 'providers')
            ) if can? :read, Provider %>

            <% if can? :report, :all %>
              <% reports_submenu = content_tag(:li, link_to(t('menu.monthly_info'), reports_monthly_info_path)) %>
              <% reports_submenu += content_tag(:li, link_to(t('menu.incentives'), reports_incentives_between_path)) %>
              <% reports_submenu += content_tag(:li, link_to(t('menu.retroactive'), reports_retroactive_between_path)) %>
              <% dropdown = link_to(
                t('menu.reports'),
                '#', class: 'dropdown-toggle',
                data: { toggle: 'dropdown' }
              ) %>
              <% dropdown += content_tag(:ul, reports_submenu, class: 'dropdown-menu') %>

              <%= content_tag(
                :li, dropdown,
                class: 'dropdown' + (controller_name == 'reports' ? ' active' : '')
              ) %>
            <% end %>
          </ul>
          <%= render partial: 'shared/nav_search' if @searchable %>
          <ul class="nav pull-right">
            <li>
              <%= link_to(
                current_user.email, edit_profile_user_path(current_user),
                'title' => t('view.users.edit_profile'),
                'data-show-tooltip' => true, 'data-placement' => 'bottom'
              ) %>
            </li>
            <li>
              <%= link_to(
                '&#x2192;'.html_safe, destroy_user_session_path,
                'title' => t('menu.actions.logout'), 'class' => 'iconic',
                'id' => 'logout', 'data-show-tooltip' => true,
                'data-placement' => 'bottom', method: :delete
              ) %>
            </li>
          </ul>
        </div>
      <% end %>
    </div>
  </div>
</div>
